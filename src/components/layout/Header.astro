---
import Navigation from "./Navigation.astro"
---

<header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16">
    {/* Logo */}
    <div class="flex-shrink-0">
      <a href="/" class="flex items-center space-x-2">
        <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
          <span class="text-white font-bold text-sm">FNI</span>
        </div>
        <span class="text-xl font-semibold text-gray-900">Blog FNI</span>
      </a>
    </div>

    {/* Botón menú lateral — siempre visible */}
    <button
      id="mobile-menu-button"
      type="button"
      class="text-gray-500 hover:text-gray-700 focus:outline-none focus:text-gray-700"
      aria-label="Abrir menú lateral"
      aria-expanded="false"
      aria-controls="sidebar"
    >
      <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>
</header>

{/* Overlay — siempre disponible, oculto inicialmente */}
<div
  id="overlay"
  class="fixed inset-0 bg-transparent hidden z-40"
  tabindex="-1"
></div>

{/* Sidebar lateral derecha */}
<nav
  id="sidebar"
  class="fixed top-0 right-0 h-full w-150 bg-white shadow-md border-l border-gray-200 transform translate-x-full transition-transform duration-300 ease-in-out z-50"
  aria-label="Navegación lateral"
>
  <div class="px-4 py-6">
    <Navigation />
  </div>
</nav>

<script is:inline>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const navLinks = sidebar.querySelectorAll('a');

  function openSidebar() {
    sidebar.classList.remove('translate-x-full');
    overlay.classList.remove('hidden');
    mobileMenuButton.setAttribute('aria-expanded', 'true');
  }

  function closeSidebar() {
    sidebar.classList.add('translate-x-full');
    overlay.classList.add('hidden');
    mobileMenuButton.setAttribute('aria-expanded', 'false');
  }

  mobileMenuButton.addEventListener('click', () => {
    if (sidebar.classList.contains('translate-x-full')) {
      openSidebar();
    } else {
      closeSidebar();
    }
  });

  overlay.addEventListener('click', closeSidebar);

  navLinks.forEach(link => {
    link.addEventListener('click', closeSidebar);
  });
</script>
