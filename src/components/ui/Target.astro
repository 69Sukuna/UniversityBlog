---
const { name, role, biografia, email, phone, photo } = Astro.props;
const tieneBio = Array.isArray(biografia) ? biografia.length > 0 : !!biografia;
---
<div
  class={`relative group cursor-pointer transition-all duration-500`}
>
  <div
    class={`${tieneBio ? 'w-[300px] h-[400px] group-hover:w-[400px] group-hover:h-[500px]' : 'w-[300px] h-[400px]'} perspective transition-all duration-500`}
  >
    <div
      class={`relative w-full h-full transition-transform duration-700 transform-style-preserve-3d group-hover:rotate-y-180 rounded-xl shadow-2xl`}
    >
      <!-- Frente -->
      <div
        class={`absolute w-full h-full backface-hidden rounded-xl shadow-lg p-4 flex flex-col items-center justify-center transition-all duration-500 bg-gradient-to-br from-[#1e3a5f] to-[#0f2439] border-2 border-[#2c5282] hover:border-[#4299e1]`}
      >
        {photo ? (
          <div class="w-28 h-28 rounded-full mb-4 overflow-hidden border-4 border-white shadow-lg transition-transform duration-500 group-hover:scale-110 bg-white flex-shrink-0">
            <img
              src={photo}
              class="w-full h-full object-cover object-center"
              alt={name}
            />
          </div>
        ) : (
          <div class="w-28 h-28 rounded-full mb-4 bg-gradient-to-br from-[#4299e1] to-[#2b6cb0] flex items-center justify-center text-white text-xl font-bold border-4 border-white shadow-lg transition-transform duration-500 group-hover:scale-110 flex-shrink-0">
            <svg
              class="w-14 h-14"
              viewBox="0 0 64 64"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
            >
              <circle cx="32" cy="20" r="12" />
              <path
                d="M32 36c-12 0-22 6-22 14v6h44v-6c0-8-10-14-22-14z"
              />
            </svg>
          </div>
        )}
        <h2 class="text-xl font-bold text-center text-white mb-2 tracking-wide px-2 leading-tight">{name}</h2>
        <p class="text-sm text-[#cbd5e0] text-center font-medium px-2 leading-relaxed">{role}</p>
        
        <!-- Indicador de informaciÃ³n adicional -->
        
          <div class="mt-4 text-[#90cdf4] text-sm animate-pulse">
            <svg class="w-6 h-6 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="block">Reverso para mÃ¡s informaciÃ³n</span>
          </div>
     
      </div>
      
      <!-- Reverso -->
      <div class="absolute w-full h-full backface-hidden bg-gradient-to-br from-[#0f2439] to-[#1a365d] text-white rounded-xl shadow-lg p-4 transform rotate-y-180 flex flex-col justify-start border-2 border-[#2c5282]">
        {tieneBio ? (
          <div class="flex flex-col h-full">
            <!-- Header con foto y nombre -->
            <div class="flex items-center gap-4 mb-6 pb-4 border-b-2 border-[#4299e1]/30">
              {photo ? (
                <div class="w-20 h-20 rounded-full overflow-hidden border-2 border-[#4299e1] shadow-lg flex-shrink-0 bg-white">
                  <img
                    src={photo}
                    class="w-full h-full object-cover object-center"
                    alt={name}
                  />
                </div>
              ) : (
                <div class="w-20 h-20 rounded-full bg-gradient-to-br from-[#4299e1] to-[#2b6cb0] flex items-center justify-center text-white text-lg font-bold border-2 border-white shadow-lg flex-shrink-0">
                  <svg
                    class="w-10 h-10"
                    viewBox="0 0 64 64"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                  >
                    <circle cx="32" cy="20" r="12" />
                    <path
                      d="M32 36c-12 0-22 6-22 14v6h44v-6c0-8-10-14-22-14z"
                    />
                  </svg>
                </div>
              )}
              <div class="flex-1 min-w-0">
                <h3 class="text-xl font-bold text-white truncate">{name}</h3>
                <p class="text-base text-[#90cdf4] font-medium truncate">{role}</p>
              </div>
            </div>
            
            <!-- BiografÃ­a -->
            <div class="flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-[#4299e1] scrollbar-track-transparent">
              {(Array.isArray(biografia) ? biografia : [biografia]).map((texto) => (
                <p class="mb-4 text-base text-justify leading-relaxed text-[#e2e8f0]">{texto}</p>
              ))}
            </div>
            
            <!-- Contacto -->
            <div class="mt-6 pt-4 border-t-2 border-[#4299e1]/30 bg-[#1a365d]/50 rounded-lg p-3">
              <h4 class="text-[#90cdf4] font-semibold mb-2 text-sm uppercase tracking-wide">Contacto</h4>
              {email && (
                <div class="flex items-center gap-2 mb-2">
                  <div class="w-5 h-5 bg-[#4299e1] rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white text-xs">@</span>
                  </div>
                  <p class="text-sm text-[#e2e8f0] truncate">{email}</p>
                </div>
              )}
              {phone && (
                <div class="flex items-center gap-2">
                  <div class="w-5 h-5 bg-[#4299e1] rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white text-xs">ðŸ“ž</span>
                  </div>
                  <p class="text-sm text-[#e2e8f0] truncate">{phone}</p>
                </div>
              )}
            </div>
          </div>
        ) : (
          <div class="flex flex-col justify-center items-center h-full">
             {photo ? (
                <div class="w-24 h-24 rounded-full overflow-hidden border-2 border-[#4299e1] shadow-lg mb-4 bg-white flex-shrink-0">
                  <img
                    src={photo}
                    class="w-full h-full object-cover object-center"
                    alt={name}
                  />
                </div>
              ) : (
                <div class="w-24 h-24 rounded-full bg-gradient-to-br from-[#4299e1] to-[#2b6cb0] flex items-center justify-center text-white text-lg font-bold border-2 border-white shadow-lg mb-4 flex-shrink-0">
                  <svg
                    class="w-12 h-12"
                    viewBox="0 0 64 64"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                  >
                    <circle cx="32" cy="20" r="12" />
                    <path
                      d="M32 36c-12 0-22 6-22 14v6h44v-6c0-8-10-14-22-14z"
                    />
                  </svg>
                </div>
              )}
            <div class="text-center mb-6">
              <h3 class="text-xl font-bold mb-2 text-white">{name}</h3>
              <p class="text-[#90cdf4] font-medium">{role}</p>
            </div>
            <div class="space-y-3 bg-[#1a365d]/50 rounded-lg p-4 w-full">
              <h4 class="text-[#90cdf4] font-semibold text-center text-sm uppercase tracking-wide mb-3">Contacto</h4>
              {email && (
                <div class="flex items-center justify-center gap-2">
                  <div class="w-5 h-5 bg-[#4299e1] rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white text-xs">@</span>
                  </div>
                  <p class="text-sm text-[#e2e8f0] truncate">{email}</p>
                </div>
              )}
              {phone && (
                <div class="flex items-center justify-center gap-2">
                  <div class="w-5 h-5 bg-[#4299e1] rounded-full flex items-center justify-center flex-shrink-0">
                    <span class="text-white text-xs">ðŸ“ž</span>
                  </div>
                  <p class="text-sm text-[#e2e8f0] truncate">{phone}</p>
                </div>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  </div>
</div>

<style>
  .perspective {
    perspective: 1000px;
  }
  .transform-style-preserve-3d {
    transform-style: preserve-3d;
  }
  .backface-hidden {
    backface-visibility: hidden;
  }
  .rotate-y-180 {
    transform: rotateY(180deg);
  }
  
  /* Scrollbar personalizado */
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  .scrollbar-thumb-blue-400 {
    scrollbar-color: #60a5fa transparent;
  }
  
  /* Webkit scrollbar */
  .scrollbar-thin::-webkit-scrollbar {
    width: 4px;
  }
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: #4299e1;
    border-radius: 2px;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: #60a5fa;
  }
</style>
